#!/bin/sh
set -e

real_wayland="${XDG_RUNTIME_DIR}/${WAYLAND_DISPLAY:-wayland-0}"

# swaybg must be run with the "normal" snap $XDG_RUNTIME_DIR
export XDG_RUNTIME_DIR="${XDG_RUNTIME_DIR}/snap.$SNAP_NAME"
mkdir -p "$XDG_RUNTIME_DIR" -m 700

ln -sf "${real_wayland}" "$XDG_RUNTIME_DIR"
ln -sf "${real_wayland}.lock" "$XDG_RUNTIME_DIR"

exec "${SNAP}/usr/bin/swaybg" "$@"
